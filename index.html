<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Recipe Gallery</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#ff7a59; --glass: rgba(255,255,255,0.04);
      --radius:14px; --max-width:1100px; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0; min-height:100vh; background:linear-gradient(180deg,#071226 0%, #0b1320 100%); color:#e6eef6; display:flex; align-items:flex-start; justify-content:center; padding:36px 20px}
    .wrap{width:100%; max-width:var(--max-width)}

    header{display:flex; gap:16px; align-items:center; margin-bottom:18px}
    header h1{font-size:20px; margin:0}
    header p{margin:0; color:var(--muted); font-size:13px}

    .controls{display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-bottom:18px}
    .search{flex:1; min-width:180px}
    input[type=text], select{width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background:var(--glass); color:inherit}
    .chips{display:flex; gap:8px; flex-wrap:wrap}
    .chip{padding:8px 12px; background:transparent; border:1px solid rgba(255,255,255,0.06); border-radius:999px; cursor:pointer; color:var(--muted); font-size:13px}
    .chip.active{background:rgba(255,255,255,0.04); color:var(--accent); border-color:rgba(255,122,89,0.18)}

    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:600px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:0; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.03); box-shadow: 0 6px 18px rgba(2,6,23,0.6); display:flex; flex-direction:column}
    .card .thumb{height:160px; background-size:cover; background-position:center}
    .card .body{padding:12px 14px; display:flex; gap:12px; align-items:flex-start}
    .meta{flex:1}
    .meta h3{margin:0 0 6px 0; font-size:16px}
    .meta p{margin:0; color:var(--muted); font-size:13px}
    .meta .tags{margin-top:8px; display:flex; gap:8px; flex-wrap:wrap}
    .tag{font-size:12px; padding:6px 8px; border-radius:999px; background:rgba(255,255,255,0.02); color:var(--muted)}
    .actions{display:flex; gap:8px; align-items:center}
    .btn{background:transparent; border:1px solid rgba(255,255,255,0.04); padding:8px 10px; border-radius:10px; cursor:pointer; color:inherit; font-size:13px}
    .btn.primary{background:linear-gradient(90deg,var(--accent), #ffbb9f); color:#081020; border:none}

    /* modal */
    .modal-back{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); z-index:60}
    .modal{max-width:900px; width:calc(100% - 28px); background:#071124; border-radius:12px; overflow:hidden; box-shadow:0 24px 60px rgba(2,6,23,0.7)}
    .modal .top{display:grid; grid-template-columns:1fr 320px; gap:0}
    @media (max-width:900px){.modal .top{grid-template-columns:1fr}}
    .modal .left{padding:18px}
    .modal .right{background:#061024; padding:18px}
    .close{position:absolute; right:12px; top:12px; background:transparent; border:none; color:var(--muted); font-size:18px; cursor:pointer}

    .list{margin:12px 0 0 0; padding:0; list-style:none}
    .list li{margin-bottom:8px}

    footer{margin-top:18px; color:var(--muted); font-size:13px}

    /* tiny utilities */
    .center{display:flex; align-items:center; justify-content:center}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div>
        <h1>Recipe Gallery</h1>
        <p>Discover recipes — search, filter, and open any recipe to see ingredients & steps.</p>
      </div>
    </header>

    <div class="controls">
      <div class="search">
        <input id="search" type="text" placeholder="Search recipes by name or ingredient..." aria-label="Search recipes">
      </div>
      <div style="min-width:180px">
        <select id="sort" aria-label="Sort recipes">
          <option value="popular">Sort: Popular</option>
          <option value="time">Sort: Shortest time</option>
          <option value="alpha">Sort: A → Z</option>
        </select>
      </div>
      <div class="chips" id="categories" aria-label="Filter by category">
        <!-- chips inserted by JS -->
      </div>
    </div>

    <section class="grid" id="grid" aria-live="polite">
      <!-- cards inserted by JS -->
    </section>

    <footer>
      Tip: Click a recipe's "View" button to open details. Favorites persist in your browser.
    </footer>
  </div>

  <!-- Modal -->
  <div class="modal-back" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close" id="closeModal" aria-label="Close">✕</button>
      <div class="top">
        <div class="left">
          <h2 id="modalTitle"></h2>
          <p id="modalDesc" style="color:var(--muted)"></p>

          <h4 style="margin-top:12px">Ingredients</h4>
          <ul id="modalIngredients" class="list"></ul>

          <h4 style="margin-top:12px">Steps</h4>
          <ol id="modalSteps" class="list"></ol>
        </div>
        <div class="right">
          <div id="modalImage" style="height:220px; background-size:cover; background-position:center; border-radius:10px"></div>

          <div style="margin-top:12px; display:flex; gap:8px">
            <button class="btn primary" id="saveFav">Save to Favorites</button>
            <button class="btn" id="shareBtn">Share</button>
          </div>

          <div id="meta" style="margin-top:14px; color:var(--muted); font-size:13px"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // sample dataset
    const RECIPES = [
      {id:1, title:'Spicy Shakshuka', category:'Breakfast', time:25, image:'https://images.unsplash.com/photo-1604908177113-4b3e1e6d7f3d?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=1', desc:'Tomato-poached eggs with warm spices.', ingredients:['4 eggs','2 cups crushed tomatoes','1 onion','1 red pepper','2 cloves garlic','1 tsp cumin','salt & pepper','olive oil'], steps:['Sauté onion, pepper and garlic','Add spices and tomatoes; simmer 10 minutes','Make wells and crack eggs on top','Cover and cook until eggs set (6–8 min)'], tags:['vegetarian','spicy']},
      {id:2, title:'Classic Pancakes', category:'Breakfast', time:20, image:'https://images.unsplash.com/photo-1587738349209-1c8f6d3ea9df?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=2', desc:'Fluffy golden pancakes.', ingredients:['1.5 cups flour','2 tbsp sugar','1.5 tsp baking powder','1 egg','1.25 cups milk','2 tbsp melted butter'], steps:['Mix dry ingredients','Whisk wet ingredients and combine','Cook on a hot griddle until bubbles form','Flip and cook until golden'], tags:['sweet','vegetarian']},
      {id:3, title:'Chicken Tikka Bowl', category:'Lunch', time:35, image:'https://images.unsplash.com/photo-1604908176965-9d4f6ae3b12d?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=3', desc:'Marinated grilled chicken with rice & salad.', ingredients:['400g chicken','yogurt','tikka masala spice','rice','salad greens'], steps:['Marinate chicken 1 hour','Grill or pan-sear until cooked','Serve over rice with salad'], tags:['gluten-free','savory']},
      {id:4, title:'Chickpea & Spinach Curry', category:'Vegan', time:30, image:'https://images.unsplash.com/photo-1606788075761-0f09e73b0a2a?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=4', desc:'Comforting chickpea curry with spinach.', ingredients:['2 cans chickpeas','200g spinach','1 onion','curry powder','coconut milk'], steps:['Sauté onion','Add spices, chickpeas and coconut milk','Simmer 12 min','Stir in spinach until wilted'], tags:['vegan','gluten-free']},
      {id:5, title:'Avocado Toast Deluxe', category:'Breakfast', time:10, image:'https://images.unsplash.com/photo-1551183053-bf91a1d81141?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=5', desc:'Smashed avocado on sourdough with extras.', ingredients:['2 slices sourdough','1 avocado','lemon','salt','chili flakes'], steps:['Toast bread','Mash avocado with lemon & salt','Spread on toast and top with chili flakes'], tags:['vegetarian','quick']},
      {id:6, title:'Beef & Broccoli Stir-fry', category:'Dinner', time:22, image:'https://images.unsplash.com/photo-1604908177182-7f9d3bce8b6a?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=6', desc:'Savory Chinese-style stir-fry.', ingredients:['300g beef slices','200g broccoli','soy sauce','garlic','cornstarch'], steps:['Marinate beef','Stir-fry broccoli then beef','Toss with sauce until glossy'], tags:['savory']},
      {id:7, title:'Lemon Herb Salmon', category:'Dinner', time:18, image:'https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=7', desc:'Pan-seared salmon with lemon & herbs.', ingredients:['2 salmon fillets','lemon','dill','salt & pepper','olive oil'], steps:['Season salmon','Sear skin-side down until crisp','Finish with lemon and herbs'], tags:['pescatarian','quick']},
      {id:8, title:'Tomato Basil Pasta', category:'Lunch', time:28, image:'https://images.unsplash.com/photo-1523986371872-9d3ba2e2f642?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8', desc:'Simple pasta with fresh tomatoes & basil.', ingredients:['200g pasta','400g cherry tomatoes','basil','garlic','olive oil'], steps:['Cook pasta','Sauté tomatoes and garlic','Toss pasta with tomatoes and basil'], tags:['vegetarian','quick']}
    ];

    // state
    let state = {query:'', category:'All', sort:'popular', favorites: new Set(JSON.parse(localStorage.getItem('fav')||'[]'))};

    const grid = document.getElementById('grid');
    const categoriesEl = document.getElementById('categories');
    const searchInput = document.getElementById('search');
    const sortSelect = document.getElementById('sort');

    // build category chips
    function buildCategories(){
      const cats = ['All', ...new Set(RECIPES.map(r=>r.category))];
      cats.forEach(cat=>{
        const btn = document.createElement('button');
        btn.className = 'chip' + (cat===state.category? ' active':'');
        btn.textContent = cat;
        btn.addEventListener('click', ()=>{ state.category = cat; Array.from(categoriesEl.children).forEach(c=>c.classList.remove('active')); btn.classList.add('active'); render(); });
        categoriesEl.appendChild(btn);
      })
    }

    function matches(recipe){
      const q = state.query.trim().toLowerCase();
      if(state.category!=='All' && recipe.category!==state.category) return false;
      if(!q) return true;
      if(recipe.title.toLowerCase().includes(q)) return true;
      if(recipe.ingredients.join(' ').toLowerCase().includes(q)) return true;
      if(recipe.tags.join(' ').toLowerCase().includes(q)) return true;
      return false;
    }

    function applySort(list){
      if(state.sort==='time') return list.sort((a,b)=>a.time-b.time);
      if(state.sort==='alpha') return list.sort((a,b)=>a.title.localeCompare(b.title));
      // popular: simple heuristic (favorites first, then time)
      return list.sort((a,b)=> (state.favorites.has(b.id)?1:0) - (state.favorites.has(a.id)?1:0) || a.time - b.time );
    }

    function render(){
      grid.innerHTML='';
      let results = RECIPES.filter(matches);
      results = applySort(results.slice());
      if(results.length===0){
        const e = document.createElement('div'); e.className='card'; e.style.padding='20px'; e.innerHTML='<p style="color:var(--muted)">No recipes found.</p>'; grid.appendChild(e); return;
      }
      results.forEach(r=>{
        const card = document.createElement('article'); card.className='card'; card.setAttribute('aria-labelledby','title-'+r.id);
        const thumb = document.createElement('div'); thumb.className='thumb'; thumb.style.backgroundImage = `url(${r.image})`;
        const body = document.createElement('div'); body.className='body';
        const meta = document.createElement('div'); meta.className='meta';
        const h = document.createElement('h3'); h.id='title-'+r.id; h.textContent = r.title;
        const p = document.createElement('p'); p.textContent = r.desc;
        const tags = document.createElement('div'); tags.className='tags'; r.tags.forEach(t=>{const sp=document.createElement('span'); sp.className='tag'; sp.textContent=t; tags.appendChild(sp)});
        meta.appendChild(h); meta.appendChild(p); meta.appendChild(tags);

        const actions = document.createElement('div'); actions.className='actions';
        const view = document.createElement('button'); view.className='btn primary'; view.textContent='View'; view.addEventListener('click', ()=>openModal(r));
        const fav = document.createElement('button'); fav.className='btn'; fav.textContent = state.favorites.has(r.id)? '♥' : '♡'; fav.title='Toggle favorite'; fav.addEventListener('click', ()=>{ toggleFav(r.id); fav.textContent = state.favorites.has(r.id)? '♥' : '♡'; render(); });
        actions.appendChild(view); actions.appendChild(fav);

        body.appendChild(meta); body.appendChild(actions);
        card.appendChild(thumb); card.appendChild(body);
        grid.appendChild(card);
      })
    }

    // favorites
    function toggleFav(id){
      if(state.favorites.has(id)) state.favorites.delete(id); else state.favorites.add(id);
      localStorage.setItem('fav', JSON.stringify([...state.favorites]));
    }

    // modal
    const modalBack = document.getElementById('modalBack');
    const closeModal = document.getElementById('closeModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalIngredients = document.getElementById('modalIngredients');
    const modalSteps = document.getElementById('modalSteps');
    const modalImage = document.getElementById('modalImage');
    const saveFav = document.getElementById('saveFav');
    const meta = document.getElementById('meta');

    function openModal(recipe){
      modalTitle.textContent = recipe.title;
      modalDesc.textContent = recipe.desc;
      modalImage.style.backgroundImage = `url(${recipe.image})`;
      modalIngredients.innerHTML = '';
      recipe.ingredients.forEach(i=>{ const li=document.createElement('li'); li.textContent=i; modalIngredients.appendChild(li)});
      modalSteps.innerHTML = '';
      recipe.steps.forEach(s=>{ const li=document.createElement('li'); li.textContent=s; modalSteps.appendChild(li)});
      saveFav.textContent = state.favorites.has(recipe.id)? 'Remove favorite' : 'Save to Favorites';
      meta.innerHTML = `Category: ${recipe.category} • Ready in ${recipe.time} min`;
      modalBack.style.display='flex'; modalBack.setAttribute('aria-hidden','false');
      // keyboard focus trap simple
      closeModal.focus();

      // share btn
      document.getElementById('shareBtn').onclick = ()=>{
        const text = `${recipe.title} — ${recipe.desc}`;
        if(navigator.share) navigator.share({title:recipe.title, text, url:location.href}); else alert('Share: '+text);
      }

      saveFav.onclick = ()=>{ toggleFav(recipe.id); saveFav.textContent = state.favorites.has(recipe.id)? 'Remove favorite' : 'Save to Favorites'; render(); };
    }
    closeModal.addEventListener('click', ()=>{ modalBack.style.display='none'; modalBack.setAttribute('aria-hidden','true'); });
    modalBack.addEventListener('click', (e)=>{ if(e.target===modalBack){ modalBack.style.display='none'; modalBack.setAttribute('aria-hidden','true'); } });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') { modalBack.style.display='none'; modalBack.setAttribute('aria-hidden','true'); } });

    // wire inputs
    searchInput.addEventListener('input', ()=>{ state.query = searchInput.value; render(); });
    sortSelect.addEventListener('change', ()=>{ state.sort = sortSelect.value; render(); });

    // init
    buildCategories();
    render();
  </script>
</body>
</html>
